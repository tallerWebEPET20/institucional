<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Carrusel responsive - 5 imágenes</title>
<style>
  :root{
    --carousel-height-desktop: 60vh;
    --carousel-height-mobile: 50vh;
    --overlay-bg: rgba(0,0,0,0.35);
    --accent: #ffd166;
    --text-color: #fff;
  }

  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}

  .carousel{
    position:relative;
    width:100%;
    max-width:1200px;
    margin: 1.5rem auto;
    overflow:hidden;
    border-radius:12px;
    background:#000;
  }

  /* altura responsive */
  .carousel .slides{
    display:flex;
    transition:transform .6s ease;
    will-change: transform;
    touch-action: pan-y;
  }

  .slide{
    min-width:100%;
    height: var(--carousel-height-mobile);
    position:relative;
    display:block;
    overflow:hidden;
  }

  /* imagen que cubre el slide; se usan <picture><img> con object-fit */
  .slide img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }

  /* overlay de texto */
  .slide__content{
    position:absolute;
    left:1.5rem;
    bottom:1.5rem;
    right:1.5rem;
    background: linear-gradient(180deg, rgba(0,0,0,0) 0%, var(--overlay-bg) 100%);
    padding:1rem;
    border-radius:8px;
    color:var(--text-color);
    backdrop-filter: blur(2px);
  }

  .slide__title{
    margin:0 0 .3rem 0;
    font-size:1.25rem;
    line-height:1.1;
  }
  .slide__desc{
    margin:0;
    font-size:.95rem;
    opacity:.95;
  }

  /* arrows */
  .carousel__arrow{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    z-index:5;
    width:44px;
    height:44px;
    border-radius:999px;
    display:grid;
    place-items:center;
    background: rgba(0,0,0,0.45);
    color:var(--text-color);
    border:1px solid rgba(255,255,255,0.08);
    cursor:pointer;
    transition:background .15s, transform .12s;
  }
  .carousel__arrow:hover{ background: rgba(0,0,0,0.6); transform: translateY(-50%) scale(1.04);}
  .carousel__arrow:active{ transform: translateY(-50%) scale(.98);}

  .carousel__arrow--prev{ left:0.6rem; }
  .carousel__arrow--next{ right:0.6rem; }

  /* dots */
  .carousel__dots{
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    bottom:.7rem;
    display:flex;
    gap:.5rem;
    z-index:6;
  }
  .dot{
    width:10px;height:10px;border-radius:999px;
    background: rgba(255,255,255,0.35);
    border: 2px solid rgba(0,0,0,0.2);
    cursor:pointer;
  }
  .dot.active{
    background:var(--accent);
    box-shadow: 0 0 0 4px rgba(255,209,102,0.12);
  }

  /* responsive: en pantallas grandes hacemos slides más altos y texto más grande */
  @media (min-width: 1024px){
    .slide{ height: var(--carousel-height-desktop); }
    .slide__content{
      left:3rem; right:auto; bottom:3rem;
      width:45%;
      padding:1.5rem;
      background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.45) 60%);
    }
    .slide__title{ font-size:1.6rem; }
    .slide__desc{ font-size:1.05rem; }
  }

  /* accessibility focus */
  .carousel__arrow:focus, .dot:focus { outline:3px solid rgba(255,209,102,0.25); outline-offset:2px; }

  /* small polish */
  .visually-hidden{ position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }
</style>
</head>
<body>

<section class="carousel" aria-label="Carrusel de imágenes">
  <div class="slides" id="slides">
    <!-- Slide 1 -->
    <article class="slide" data-index="0" aria-roledescription="slide" aria-label="Slide 1">
      <picture>
        <!-- imagen para pantallas grandes -->
        <source media="(min-width:1024px)" srcset="https://images.unsplash.com/photo-1503264116251-35a269479413?q=80&w=2000&auto=format&fit=crop">
        <!-- imagen para pantallas pequeñas -->
        <img src="https://images.unsplash.com/photo-1503264116251-35a269479413?q=80&w=1000&auto=format&fit=crop" alt="Paisaje montañoso al atardecer">
      </picture>
      <div class="slide__content">
        <h3 class="slide__title">Atardecer en las montañas</h3>
        <p class="slide__desc">Un paseo entre cumbres doradas. Ideal para desconectar y disfrutar la naturaleza.</p>
      </div>
    </article>

    <!-- Slide 2 -->
    <article class="slide" data-index="1" aria-roledescription="slide" aria-label="Slide 2">
      <picture>
        <source media="(min-width:1024px)" srcset="https://images.unsplash.com/photo-1491553895911-0055eca6402d?q=80&w=2000&auto=format&fit=crop">
        <img src="https://images.unsplash.com/photo-1491553895911-0055eca6402d?q=80&w=1000&auto=format&fit=crop" alt="Ciudad nocturna con luces">
      </picture>
      <div class="slide__content">
        <h3 class="slide__title">Luces de la ciudad</h3>
        <p class="slide__desc">Movimiento, energía y vida nocturna que inspiran creatividad.</p>
      </div>
    </article>

    <!-- Slide 3 -->
    <article class="slide" data-index="2" aria-roledescription="slide" aria-label="Slide 3">
      <picture>
        <source media="(min-width:1024px)" srcset="https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=2000&auto=format&fit=crop">
        <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1000&auto=format&fit=crop" alt="Playa con olas suaves">
      </picture>
      <div class="slide__content">
        <h3 class="slide__title">Brisa marina</h3>
        <p class="slide__desc">Relájate con el sonido de las olas y la calma del horizonte.</p>
      </div>
    </article>

    <!-- Slide 4 -->
    <article class="slide" data-index="3" aria-roledescription="slide" aria-label="Slide 4">
      <picture>
        <source media="(min-width:1024px)" srcset="https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=2000&auto=format&fit=crop">
        <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1000&auto=format&fit=crop" alt="Bosque frondoso con neblina">
      </picture>
      <div class="slide__content">
        <h3 class="slide__title">Bosque entre nieblas</h3>
        <p class="slide__desc">Explora senderos ocultos y descubre rincones mágicos.</p>
      </div>
    </article>

    <!-- Slide 5 -->
    <article class="slide" data-index="4" aria-roledescription="slide" aria-label="Slide 5">
      <picture>
        <source media="(min-width:1024px)" srcset="https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2000&auto=format&fit=crop">
        <img src="https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=1000&auto=format&fit=crop" alt="Camino rural con árboles">
      </picture>
      <div class="slide__content">
        <h3 class="slide__title">Camino rural</h3>
        <p class="slide__desc">Aventuras sencillas: el placer de viajar sin prisa.</p>
      </div>
    </article>
  </div>

  <!-- Arrows -->
  <button class="carousel__arrow carousel__arrow--prev" id="prev" aria-label="Anterior">
    &#9664;
  </button>
  <button class="carousel__arrow carousel__arrow--next" id="next" aria-label="Siguiente">
    &#9654;
  </button>

  <!-- Dots -->
  <div class="carousel__dots" id="dots" role="tablist" aria-hidden="false"></div>

  <span class="visually-hidden" id="carousel-instructions">
    Carrusel de imágenes. Usa las flechas, puntos o las teclas izquierda/derecha para navegar. El carrusel se pausa al pasar el cursor.
  </span>
</section>

<script>
(function(){
  const slidesEl = document.getElementById('slides');
  const slides = Array.from(slidesEl.children);
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const dotsEl = document.getElementById('dots');
  let index = 0;
  const total = slides.length;
  const autoplayDelay = 4500;
  let autoplayTimer = null;
  let isPaused = false;

  // crear dots
  slides.forEach((_, i) => {
    const d = document.createElement('button');
    d.className = 'dot';
    d.setAttribute('aria-label', `Ir al slide ${i+1}`);
    d.setAttribute('data-index', i);
    d.type = 'button';
    dotsEl.appendChild(d);
  });
  const dots = Array.from(dotsEl.children);

  function updateUI(){
    // mover slides
    slidesEl.style.transform = `translateX(-${index * 100}%)`;
    // aria-hidden en slides
    slides.forEach((s, i) => {
      s.setAttribute('aria-hidden', i === index ? 'false' : 'true');
    });
    // dots active
    dots.forEach((d,i) => d.classList.toggle('active', i === index));
  }

  function showNext(){
    index = (index + 1) % total;
    updateUI();
  }
  function showPrev(){
    index = (index - 1 + total) % total;
    updateUI();
  }
  prevBtn.addEventListener('click', () => { showPrev(); resetAutoplay(); });
  nextBtn.addEventListener('click', () => { showNext(); resetAutoplay(); });

  // dot click
  dots.forEach(d => d.addEventListener('click', (e) => {
    const i = parseInt(e.currentTarget.dataset.index,10);
    if (!Number.isNaN(i)){
      index = i;
      updateUI();
      resetAutoplay();
    }
  }));

  // autoplay
  function startAutoplay(){
    stopAutoplay();
    autoplayTimer = setInterval(() => {
      if (!isPaused) showNext();
    }, autoplayDelay);
  }
  function stopAutoplay(){ if (autoplayTimer) { clearInterval(autoplayTimer); autoplayTimer = null; } }
  function resetAutoplay(){ stopAutoplay(); startAutoplay(); }

  // pause on hover / focus within carousel
  const carousel = document.querySelector('.carousel');
  carousel.addEventListener('mouseenter', () => { isPaused = true; });
  carousel.addEventListener('mouseleave', () => { isPaused = false; });
  carousel.addEventListener('focusin', () => { isPaused = true; });
  carousel.addEventListener('focusout', () => { isPaused = false; });

  // keyboard navigation
  window.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') { showPrev(); resetAutoplay(); }
    if (e.key === 'ArrowRight') { showNext(); resetAutoplay(); }
  });

  // touch support (swipe)
  let startX = 0, currentX = 0, isDragging = false;
  slidesEl.addEventListener('touchstart', (e) => {
    startX = e.touches[0].clientX;
    isDragging = true;
  }, {passive:true});
  slidesEl.addEventListener('touchmove', (e) => {
    if (!isDragging) return;
    currentX = e.touches[0].clientX;
    const diff = currentX - startX;
    // allow slight drag effect
    slidesEl.style.transition = 'none';
    slidesEl.style.transform = `translateX(${ -index * 100 + (diff / carousel.offsetWidth) * 100 }%)`;
  }, {passive:true});
  slidesEl.addEventListener('touchend', (e) => {
    slidesEl.style.transition = ''; // restore
    isDragging = false;
    const diff = currentX - startX;
    if (Math.abs(diff) > 50) {
      if (diff < 0) showNext(); else showPrev();
    } else {
      updateUI(); // snap back
    }
    startX = currentX = 0;
    resetAutoplay();
  });

  // ensure images cover area on resize (small polish)
  window.addEventListener('resize', () => { updateUI(); });

  // init
  updateUI();
  startAutoplay();

  // Optional: expose controls for debugging
  window._carousel = { next: showNext, prev: showPrev, go: (i)=>{ index = i%total; updateUI(); } };

})();
</script>
</body>
</html>
